/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_view = require("@codemirror/view");
var WIKI_BASE_URL = "https://wiki.factorio.com";
var FACTORIO_ITEMS = {
  "iron plate": "/images/thumb/Iron_plate.png/32px-Iron_plate.png",
  "copper plate": "/images/thumb/Copper_plate.png/32px-Copper_plate.png",
  "steel plate": "/images/thumb/Steel_plate.png/32px-Steel_plate.png",
  "iron ore": "/images/thumb/Iron_ore.png/32px-Iron_ore.png",
  "copper ore": "/images/thumb/Copper_ore.png/32px-Copper_ore.png",
  "coal": "/images/thumb/Coal.png/32px-Coal.png",
  "stone": "/images/thumb/Stone.png/32px-Stone.png",
  "wood": "/images/thumb/Wood.png/32px-Wood.png",
  "irongear": "/images/thumb/Iron_gear_wheel.png/32px-Iron_gear_wheel.png",
  "copper cable": "/images/thumb/Copper_cable.png/32px-Copper_cable.png",
  "electronic circuit": "/images/thumb/Electronic_circuit.png/32px-Electronic_circuit.png",
  "advanced circuit": "/images/thumb/Advanced_circuit.png/32px-Advanced_circuit.png",
  "processing unit	": "/images/thumb/Processing_unit.png/32px-Processing_unit.png"
};
var FactorioIconWidget = class extends import_view.WidgetType {
  constructor(itemName) {
    super();
    this.itemName = itemName;
  }
  // Creates the DOM element for the widget - a span containing an img
  toDOM() {
    const span = document.createElement("span");
    span.className = "factorio-item";
    const img = document.createElement("img");
    img.src = WIKI_BASE_URL + FACTORIO_ITEMS[this.itemName.toLowerCase()];
    img.className = "factorio-icon";
    img.alt = this.itemName;
    img.title = this.itemName;
    span.appendChild(img);
    return span;
  }
};
var FactorioIconEditorPlugin = class {
  constructor(view) {
    this.decorations = this.buildDecorations(view);
  }
  // Updates decorations when document changes or viewport scrolls
  update(update) {
    if (update.docChanged || update.viewportChanged) {
      this.decorations = this.buildDecorations(update.view);
    }
  }
  destroy() {
  }
  // Builds decorations by finding Factorio item names and replacing them with widgets
  buildDecorations(view) {
    const widgets = [];
    const doc = view.state.doc;
    const itemRegex = new RegExp(`\\b(${Object.keys(FACTORIO_ITEMS).join("|")})\\b`, "g");
    for (let i = 1; i <= doc.lines; i++) {
      const line = doc.line(i);
      const text = line.text;
      let match;
      while ((match = itemRegex.exec(text)) !== null) {
        const itemName = match[0];
        if (FACTORIO_ITEMS[itemName.toLowerCase()]) {
          const from = line.from + match.index;
          const to = from + itemName.length;
          const deco = import_view.Decoration.replace({
            widget: new FactorioIconWidget(itemName)
          });
          widgets.push(deco.range(from, to));
        }
      }
    }
    return import_view.Decoration.set(widgets);
  }
};
var MainPlugin = class extends import_obsidian.Plugin {
  async onload() {
    console.log("Loading Factorio Icons plugin");
    this.registerEditorExtension([
      import_view.ViewPlugin.fromClass(FactorioIconEditorPlugin, {
        decorations: (v) => v.decorations
      })
    ]);
  }
  onunload() {
    console.log("Unloading Factorio Icons plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcclxuXHRQbHVnaW4sXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHtcclxuXHRFZGl0b3JWaWV3LFxyXG5cdFBsdWdpblZhbHVlLFxyXG5cdFZpZXdVcGRhdGUsXHJcblx0RGVjb3JhdGlvblNldCxcclxuXHREZWNvcmF0aW9uLFxyXG5cdFdpZGdldFR5cGUsXHJcblx0Vmlld1BsdWdpblxyXG59IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnXHJcblxyXG4vLyBCYXNlIFVSTCBmb3IgRmFjdG9yaW8gd2lraSBpbWFnZXNcclxuY29uc3QgV0lLSV9CQVNFX1VSTCA9ICdodHRwczovL3dpa2kuZmFjdG9yaW8uY29tJztcclxuXHJcbi8vIERpY3Rpb25hcnkgbWFwcGluZyBGYWN0b3JpbyBpdGVtIG5hbWVzIHRvIHRoZWlyIGltYWdlIFVSTHMgb24gdGhlIHdpa2lcclxuY29uc3QgRkFDVE9SSU9fSVRFTVM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XHJcblx0J2lyb24gcGxhdGUnOiAnL2ltYWdlcy90aHVtYi9Jcm9uX3BsYXRlLnBuZy8zMnB4LUlyb25fcGxhdGUucG5nJyxcclxuXHQnY29wcGVyIHBsYXRlJzogJy9pbWFnZXMvdGh1bWIvQ29wcGVyX3BsYXRlLnBuZy8zMnB4LUNvcHBlcl9wbGF0ZS5wbmcnLFxyXG5cdCdzdGVlbCBwbGF0ZSc6ICcvaW1hZ2VzL3RodW1iL1N0ZWVsX3BsYXRlLnBuZy8zMnB4LVN0ZWVsX3BsYXRlLnBuZycsXHJcblx0J2lyb24gb3JlJzogJy9pbWFnZXMvdGh1bWIvSXJvbl9vcmUucG5nLzMycHgtSXJvbl9vcmUucG5nJyxcclxuXHQnY29wcGVyIG9yZSc6ICcvaW1hZ2VzL3RodW1iL0NvcHBlcl9vcmUucG5nLzMycHgtQ29wcGVyX29yZS5wbmcnLFxyXG5cdCdjb2FsJzogJy9pbWFnZXMvdGh1bWIvQ29hbC5wbmcvMzJweC1Db2FsLnBuZycsXHJcblx0J3N0b25lJzogJy9pbWFnZXMvdGh1bWIvU3RvbmUucG5nLzMycHgtU3RvbmUucG5nJyxcclxuXHQnd29vZCc6ICcvaW1hZ2VzL3RodW1iL1dvb2QucG5nLzMycHgtV29vZC5wbmcnLFxyXG5cdCdpcm9uZ2Vhcic6ICcvaW1hZ2VzL3RodW1iL0lyb25fZ2Vhcl93aGVlbC5wbmcvMzJweC1Jcm9uX2dlYXJfd2hlZWwucG5nJyxcclxuXHQnY29wcGVyIGNhYmxlJzogJy9pbWFnZXMvdGh1bWIvQ29wcGVyX2NhYmxlLnBuZy8zMnB4LUNvcHBlcl9jYWJsZS5wbmcnLFxyXG5cdCdlbGVjdHJvbmljIGNpcmN1aXQnOiAnL2ltYWdlcy90aHVtYi9FbGVjdHJvbmljX2NpcmN1aXQucG5nLzMycHgtRWxlY3Ryb25pY19jaXJjdWl0LnBuZycsXHJcblx0J2FkdmFuY2VkIGNpcmN1aXQnOiAnL2ltYWdlcy90aHVtYi9BZHZhbmNlZF9jaXJjdWl0LnBuZy8zMnB4LUFkdmFuY2VkX2NpcmN1aXQucG5nJyxcclxuXHQncHJvY2Vzc2luZyB1bml0XHQnOiAnL2ltYWdlcy90aHVtYi9Qcm9jZXNzaW5nX3VuaXQucG5nLzMycHgtUHJvY2Vzc2luZ191bml0LnBuZycsXHJcbn07XHJcblxyXG4vLyBXaWRnZXQgdGhhdCBjcmVhdGVzIGEgc3BhbiBjb250YWluaW5nIGFuIGltYWdlIGZvciBhIEZhY3RvcmlvIGl0ZW1cclxuY2xhc3MgRmFjdG9yaW9JY29uV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XHJcblx0Y29uc3RydWN0b3IocmVhZG9ubHkgaXRlbU5hbWU6IHN0cmluZykge1xyXG5cdFx0c3VwZXIoKTtcclxuXHR9XHJcblxyXG5cdC8vIENyZWF0ZXMgdGhlIERPTSBlbGVtZW50IGZvciB0aGUgd2lkZ2V0IC0gYSBzcGFuIGNvbnRhaW5pbmcgYW4gaW1nXHJcblx0dG9ET00oKSB7XHJcblx0XHRjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cdFx0c3Bhbi5jbGFzc05hbWUgPSAnZmFjdG9yaW8taXRlbSc7XHJcblxyXG5cdFx0Y29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0XHRpbWcuc3JjID0gV0lLSV9CQVNFX1VSTCArIEZBQ1RPUklPX0lURU1TW3RoaXMuaXRlbU5hbWUudG9Mb3dlckNhc2UoKV07XHJcblx0XHRpbWcuY2xhc3NOYW1lID0gJ2ZhY3RvcmlvLWljb24nO1xyXG5cdFx0aW1nLmFsdCA9IHRoaXMuaXRlbU5hbWU7XHJcblx0XHRpbWcudGl0bGUgPSB0aGlzLml0ZW1OYW1lOyAvLyBTaG93cyBpdGVtIG5hbWUgb24gaG92ZXJcclxuXHJcblx0XHRzcGFuLmFwcGVuZENoaWxkKGltZyk7XHJcblx0XHRyZXR1cm4gc3BhbjtcclxuXHR9XHJcbn1cclxuXHJcbi8vIENvZGVNaXJyb3IgcGx1Z2luIHRoYXQgaGFuZGxlcyByZXBsYWNpbmcgRmFjdG9yaW8gaXRlbSB0ZXh0IHdpdGggaWNvbnNcclxuY2xhc3MgRmFjdG9yaW9JY29uRWRpdG9yUGx1Z2luIGltcGxlbWVudHMgUGx1Z2luVmFsdWUge1xyXG5cdGRlY29yYXRpb25zOiBEZWNvcmF0aW9uU2V0O1xyXG5cclxuXHRjb25zdHJ1Y3Rvcih2aWV3OiBFZGl0b3JWaWV3KSB7XHJcblx0XHR0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHZpZXcpO1xyXG5cdH1cclxuXHJcblx0Ly8gVXBkYXRlcyBkZWNvcmF0aW9ucyB3aGVuIGRvY3VtZW50IGNoYW5nZXMgb3Igdmlld3BvcnQgc2Nyb2xsc1xyXG5cdHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcclxuXHRcdGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSB7XHJcblx0XHRcdHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjb3JhdGlvbnModXBkYXRlLnZpZXcpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZGVzdHJveSgpIHsgfVxyXG5cclxuXHQvLyBCdWlsZHMgZGVjb3JhdGlvbnMgYnkgZmluZGluZyBGYWN0b3JpbyBpdGVtIG5hbWVzIGFuZCByZXBsYWNpbmcgdGhlbSB3aXRoIHdpZGdldHNcclxuXHRidWlsZERlY29yYXRpb25zKHZpZXc6IEVkaXRvclZpZXcpOiBEZWNvcmF0aW9uU2V0IHtcclxuXHRcdGNvbnN0IHdpZGdldHM6IGFueVtdID0gW107XHJcblx0XHRjb25zdCBkb2MgPSB2aWV3LnN0YXRlLmRvYztcclxuXHJcblx0XHQvLyBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggYW55IEZhY3RvcmlvIGl0ZW0gbmFtZSBmcm9tIG91ciBkaWN0aW9uYXJ5XHJcblx0XHRjb25zdCBpdGVtUmVnZXggPSBuZXcgUmVnRXhwKGBcXFxcYigke09iamVjdC5rZXlzKEZBQ1RPUklPX0lURU1TKS5qb2luKCd8Jyl9KVxcXFxiYCwgJ2cnKTtcclxuXHJcblx0XHQvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBsaW5lIG9mIHRoZSBkb2N1bWVudFxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gZG9jLmxpbmVzOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgbGluZSA9IGRvYy5saW5lKGkpO1xyXG5cdFx0XHRjb25zdCB0ZXh0ID0gbGluZS50ZXh0O1xyXG5cdFx0XHRsZXQgbWF0Y2g7XHJcblxyXG5cdFx0XHQvLyBGaW5kIGFsbCBtYXRjaGVzIGluIHRoZSBjdXJyZW50IGxpbmVcclxuXHRcdFx0d2hpbGUgKChtYXRjaCA9IGl0ZW1SZWdleC5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW1OYW1lID0gbWF0Y2hbMF07XHJcblx0XHRcdFx0aWYgKEZBQ1RPUklPX0lURU1TW2l0ZW1OYW1lLnRvTG93ZXJDYXNlKCldKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9tID0gbGluZS5mcm9tICsgbWF0Y2guaW5kZXg7XHJcblx0XHRcdFx0XHRjb25zdCB0byA9IGZyb20gKyBpdGVtTmFtZS5sZW5ndGg7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgZGVjb3JhdGlvbiB0aGF0IHJlcGxhY2VzIHRoZSB0ZXh0IHdpdGggb3VyIHdpZGdldFxyXG5cdFx0XHRcdFx0Y29uc3QgZGVjbyA9IERlY29yYXRpb24ucmVwbGFjZSh7XHJcblx0XHRcdFx0XHRcdHdpZGdldDogbmV3IEZhY3RvcmlvSWNvbldpZGdldChpdGVtTmFtZSksXHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHR3aWRnZXRzLnB1c2goZGVjby5yYW5nZShmcm9tLCB0bykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBEZWNvcmF0aW9uLnNldCh3aWRnZXRzKTtcclxuXHR9XHJcbn1cclxuXHJcbi8vIE1haW4gcGx1Z2luIGNsYXNzIHRoYXQgaW50ZWdyYXRlcyB3aXRoIE9ic2lkaWFuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdMb2FkaW5nIEZhY3RvcmlvIEljb25zIHBsdWdpbicpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oW1xyXG5cdFx0XHRWaWV3UGx1Z2luLmZyb21DbGFzcyhGYWN0b3Jpb0ljb25FZGl0b3JQbHVnaW4sIHtcclxuXHRcdFx0XHRkZWNvcmF0aW9uczogKHYpID0+IHYuZGVjb3JhdGlvbnMsXHJcblx0XHRcdH0pLFxyXG5cdFx0XSk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdVbmxvYWRpbmcgRmFjdG9yaW8gSWNvbnMgcGx1Z2luJyk7XHJcblx0fVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUVPO0FBRVAsa0JB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
